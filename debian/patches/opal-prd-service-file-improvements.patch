From: Frederic Bonnard <frediz@linux.vnet.ibm.com>
Date: Wed, 21 Feb 2018 15:36:39 +0100
Subject: opal-prd-service-file-improvements

---
 external/opal-prd/opal-prd.service | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/external/opal-prd/opal-prd.service b/external/opal-prd/opal-prd.service
index a53d8d9..d3dc4b9 100644
--- a/external/opal-prd/opal-prd.service
+++ b/external/opal-prd/opal-prd.service
@@ -2,9 +2,11 @@
 Description=OPAL PRD daemon
 ConditionVirtualization=false
 ConditionPathExists=/sys/firmware/devicetree/base/ibm,opal/diagnostics
+Documentation=man:opal-prd(8)
 
 [Service]
-ExecStart=/usr/sbin/opal-prd --pnor /dev/mtd0
+EnvironmentFile=/etc/default/opal-prd
+ExecStart=/usr/sbin/opal-prd --pnor $PNOR_DEVICE $DAEMON_OPTS
 Restart=always
 
 [Install]
